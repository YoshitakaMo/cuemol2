# Normal C++ source files
SET(MOLCLIENT_SRCS
  molclient.cpp
  MolClientManager.cpp
  XmlRpcConn.cpp
)

##########
# CueMol interface definitions for MCWRAPGEN

SET(MOLCLIENT_MCWG_QIFS
  MolClientManager.qif
  XmlRpcConn.qif
  )

# module loader generated by MCWG
SET(MOLCLIENT_MODLDR_SRC molclient.moddef)

MCWRAPGEN_CLASS(MOLCLIENT_SRCS ${MOLCLIENT_MCWG_QIFS})
MCWRAPGEN_MODULE(MOLCLIENT_SRCS ${MOLCLIENT_MODLDR_SRC} ${MOLCLIENT_MCWG_QIFS})

# add_library(molclient SHARED ${MOLCLIENT_SRCS} ${MCWG_HEADERS})
add_library(molclient STATIC ${MOLCLIENT_SRCS} ${MCWG_HEADERS})

if (WIN32)
  add_definitions(-DMOLCLIENT_EXPORTS=1)
else()
  target_compile_options(molclient PUBLIC "-fPIC")
endif()

target_link_libraries(molclient INTERFACE qlib gfx qsys molstr ${XMLRPC_LIBRARIES})

target_include_directories(
  molclient PRIVATE
  ${CMAKE_SOURCE_DIR}/src
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_BINARY_DIR}/src
  ${Boost_INCLUDE_DIRS}
  ${XMLRPC_INCLUDE_DIRS}
)

MCWRAPGEN_SCR_WRAPPERS(molclient)

install(TARGETS molclient
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  )
